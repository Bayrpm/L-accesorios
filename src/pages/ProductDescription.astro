---
import { getProductById } from "../pages/crudproducts.ts";
import Layout from '../layouts/Layout.astro';

const params = Astro.url.searchParams;
const idproducto = parseInt(params.get('idproducto') || '');

const product = await getProductById(idproducto);
---

<Layout title="Descripción del Producto">
  <div class="container mx-auto p-4">
    { product ? (
      <div class="max-w-lg mx-auto bg-white rounded-lg shadow-lg p-6">
        <img src={product.imagen} alt={product.nombre} class="w-full h-auto mb-4 rounded">
        <h1 class="text-3xl font-bold mb-2">{product.nombre}</h1>
        <p class="text-xl font-semibold text-gray-700 mb-4">${product.precio}</p>
        <p class="text-gray-600 mb-4">{product.descripcion}</p>
        <div>
          <span class="font-semibold">Categoría:</span> {product.idcategoria}
        </div>
        <div>
          <span class="font-semibold">Opción:</span> {product.idopcion}
        </div>
        <div>
          <span class="font-semibold">Sucursal:</span> {product.idsucursal}
        </div>
        <div>
          <span class="font-semibold">Stock:</span> {product.stock}
        </div>
        <!-- Agrega cualquier otro campo que necesites mostrar -->
      </div>
    ) : (
      <p>Producto no encontrado</p>
    )}
  </div>
  <div><a href="">felicidad</a></div>
</Layout>
